{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { userSetter } from 'core-js/fn/symbol';\nexport default {\n  name: 'AdminUsers',\n  data() {\n    return {\n      admins: [],\n      dropdownVisible: null,\n      // Tracks which dropdown is visible\n      editingAdminId: null,\n      editedAdmin: {\n        firstname: \"\",\n        lastname: \"\",\n        username: \"\",\n        email: \"\"\n      }\n    };\n  },\n  methods: {\n    async fetchAdmins() {\n      const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\n      try {\n        const response = await axios.get(`${backendUrl}/admins`); // Update with your API endpoint\n        this.admins = response.data; // Store fetched data\n      } catch (error) {\n        console.error('Error fetching admins:', error);\n      }\n    },\n    toggleDropdown(userId, event) {\n      event.stopPropagation();\n      this.dropdownVisible = this.dropdownVisible === userId ? null : userId; // Toggle visibility based on userId\n    },\n    editUser(userId) {\n      // Handle the actions when the edit option is clicked (currently shows an alert with user's ID)\n      this.editingAdminId = userId.id;\n      this.editedAdmin = {\n        ...admin\n      }; // Copy admin details to editedAdmin\n      this.dropdownVisible = null; // Close dropdown\n    },\n    async saveEdit(userId) {\n      const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\n      try {\n        await axios.put(`${backendUrl}/admins`, {\n          id: userId,\n          firstname: this.editedAdmin.firstname,\n          lastname: this.editedAdmin.lastname,\n          username: this.editedAdmin.username,\n          email: this.editedAdmin.email\n        });\n        // Update UI\n        this.admins = this.admins.map(admin => admin.id === userId ? {\n          ...admin,\n          ...this.editedAdmin\n        } : admin);\n        this.editingAdminId = null; // Exit edit mode\n      } catch (error) {\n        console.error(\"Error updating admin:\", error);\n        alert(\"Failed to update admin.\");\n      }\n    },\n    cancelEdit() {\n      this.editingAdminId = null; // Cancel edit mode\n    },\n    async removeUser(userId) {\n      // Handle the actions when the remove option is clicked (currently shows an alert with user's ID)\n      if (!confirm(\"Are you sure you want to remove this admin?\")) return;\n      try {\n        const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\n        await axios.delete(`${backendUrl}/admins`, {\n          data: {\n            id: userId\n          }\n        });\n\n        // Update the UI: Remove the deleted admin from the list\n        this.admins = this.admins.filter(admin => admin.id !== userId);\n        alert(\"Admin removed successfully!\");\n      } catch (error) {\n        console.error(\"Error removing admin:\", error);\n        alert(\"Failed to remove admin.\");\n      }\n    },\n    closeDropdown() {\n      this.dropdownVisible = null; // Close any open dropdown\n    }\n  },\n  mounted() {\n    // Close dropdown when clicking outside\n    document.addEventListener('click', this.closeDropdown);\n    this.fetchAdmins();\n  },\n  beforeUnmount() {\n    // Clean up event listener when component is destroyed/unmounted\n    document.removeEventListener('click', this.closeDropdown);\n  }\n};","map":{"version":3,"names":["axios","userSetter","name","data","admins","dropdownVisible","editingAdminId","editedAdmin","firstname","lastname","username","email","methods","fetchAdmins","backendUrl","process","env","VUE_APP_BACKEND_URL","response","get","error","console","toggleDropdown","userId","event","stopPropagation","editUser","id","admin","saveEdit","put","map","alert","cancelEdit","removeUser","confirm","delete","filter","closeDropdown","mounted","document","addEventListener","beforeUnmount","removeEventListener"],"sources":["C:\\Users\\kiera\\Downloads\\Kiera-Branch-Capstone\\frontend\\src\\pages\\AdminUsers.vue"],"sourcesContent":["<template>\r\n  <div class=\"admin-container\">\r\n    <div class=\"layout-wrapper\">\r\n    \r\n      <main class=\"main-content\">\r\n        <header class=\"header\">\r\n          <h1 class=\"page-title\">Admin Users</h1>\r\n          <div class=\"user-profile\">\r\n            <div class=\"user-info\">\r\n              <span class=\"user-name\">Samira G.</span>\r\n              <span class=\"user-role\">Admin</span>\r\n            </div>\r\n            <div class=\"user-avatar\"></div>\r\n          </div>\r\n        </header>\r\n        <button class=\"new-admin-button\" @click=\"$router.push('/adminnew')\">+ New Admin</button>\r\n        <section class=\"content-section\">\r\n          <div class=\"banner\"> <!-- REMOVE BANNER ??? -->\r\n          </div>\r\n          <div class=\"profile-content\">\r\n            <div class=\"profile-details\">\r\n              <div class=\"profile-header-section\">\r\n              </div>\r\n              <section class=\"about-section\">\r\n                <!-- <h3 class=\"section-title\">Modify Admin Users</h3> -->\r\n                <!-- User info header -->\r\n                <div class=\"user-info-header\">\r\n                  <!-- <span class=\"user-checkbox-header\">Select</span> -->\r\n                  <span class=\"user-name-header\">Name</span>\r\n                  <span class=\"user-username-header\">Username</span>\r\n                  <span class=\"user-email-header\">Email</span>\r\n                  <span class=\"action-header\">Action</span>\r\n                </div>\r\n                <!-- User info row -->\r\n                <div class=\"user-info-row\" v-for=\"admin in admins\" :key=\"admin.id\">\r\n                  <template v-if=\"editingAdminId === admin.id\">\r\n                    <!-- Editable Fields -->\r\n                    <input type=\"text\" v-model=\"editedAdmin.firstname\" class=\"edit-input\" />\r\n                    <input type=\"text\" v-model=\"editedAdmin.lastname\" class=\"edit-input\" />\r\n                    <input type=\"text\" v-model=\"editedAdmin.username\" class=\"edit-input\" />\r\n                    <input type=\"email\" v-model=\"editedAdmin.email\" class=\"edit-input\" />\r\n                    <div class=\"action-buttons\">\r\n                      <button class=\"save-btn\" @click=\"saveEdit(admin.id)\">Save</button>\r\n                      <button class=\"cancel-btn\" @click=\"cancelEdit\">Cancel</button>\r\n                    </div>\r\n                  </template>\r\n                  \r\n                  <template v-else>\r\n                    <span class=\"user-name\">{{ admin.firstname }} {{ admin.lastname }}</span>\r\n                    <span class=\"user-username\">{{ admin.username }}</span>\r\n                    <span class=\"user-email\">{{ admin.email }}</span>\r\n                    <div class=\"action-menu\">\r\n                      <button class=\"action-button\" @click=\"toggleDropdown(admin.id, $event)\">&#8230;</button>\r\n                      <ul v-if=\"dropdownVisible === admin.id\" class=\"dropdown-menu\">\r\n                        <li @click=\"editUser(admin)\">Edit</li>\r\n                        <li @click=\"removeUser(admin.id)\">Remove</li>\r\n                      </ul>\r\n                    </div>\r\n                  </template>\r\n                </div>\r\n              </section>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { userSetter } from 'core-js/fn/symbol';\r\nexport default {\r\n  name: 'AdminUsers',\r\n  data() {\r\n    return {\r\n      admins: [],\r\n      dropdownVisible: null,  // Tracks which dropdown is visible\r\n      editingAdminId: null,\r\n      editedAdmin: {\r\n        firstname: \"\",\r\n        lastname: \"\",\r\n        username: \"\",\r\n        email: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchAdmins() {\r\n\r\n      const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\r\n\r\n\r\n      try {\r\n\r\n        const response = await axios.get(`${backendUrl}/admins`); // Update with your API endpoint\r\n        this.admins = response.data; // Store fetched data\r\n      } catch (error) {\r\n        console.error('Error fetching admins:', error);\r\n      }\r\n    },\r\n    toggleDropdown(userId, event) {\r\n      event.stopPropagation();\r\n      this.dropdownVisible = this.dropdownVisible === userId ? null : userId; // Toggle visibility based on userId\r\n    },\r\n    editUser(userId) {  // Handle the actions when the edit option is clicked (currently shows an alert with user's ID)\r\n    this.editingAdminId = userId.id;\r\n      this.editedAdmin = { ...admin }; // Copy admin details to editedAdmin\r\n      this.dropdownVisible = null; // Close dropdown\r\n    },\r\n\r\n    async saveEdit(userId) {\r\n      const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\r\n      try {\r\n        await axios.put(`${backendUrl}/admins`, {\r\n          id: userId,\r\n          firstname: this.editedAdmin.firstname,\r\n          lastname: this.editedAdmin.lastname,\r\n          username: this.editedAdmin.username,\r\n          email: this.editedAdmin.email,\r\n        });\r\n        // Update UI\r\n        this.admins = this.admins.map(admin => admin.id === userId ? { ...admin, ...this.editedAdmin } : admin );\r\n\r\n        this.editingAdminId = null; // Exit edit mode\r\n      } catch (error) {\r\n        console.error(\"Error updating admin:\", error);\r\n        alert(\"Failed to update admin.\");\r\n      }\r\n    },\r\n    cancelEdit() {\r\n      this.editingAdminId = null; // Cancel edit mode\r\n    },\r\n\r\n    async removeUser(userId) {  // Handle the actions when the remove option is clicked (currently shows an alert with user's ID)\r\n      if (!confirm(\"Are you sure you want to remove this admin?\")) return;\r\n\r\n      try {\r\n        const backendUrl = process.env.VUE_APP_BACKEND_URL || \"https://asu-capstone-backend.onrender.com\";\r\n\r\n        await axios.delete(`${backendUrl}/admins`,{ data: { id: userId }});\r\n        \r\n        // Update the UI: Remove the deleted admin from the list\r\n        this.admins = this.admins.filter(admin => admin.id !== userId);\r\n\r\n        \r\n        alert(\"Admin removed successfully!\");\r\n      } catch (error) {\r\n        console.error(\"Error removing admin:\", error);\r\n        alert(\"Failed to remove admin.\");\r\n      }\r\n    },\r\n    closeDropdown() {\r\n      this.dropdownVisible = null; // Close any open dropdown\r\n    },\r\n  },\r\n  mounted() {\r\n    // Close dropdown when clicking outside\r\n    document.addEventListener('click', this.closeDropdown);\r\n    this.fetchAdmins();\r\n  },\r\n  beforeUnmount() {\r\n    // Clean up event listener when component is destroyed/unmounted\r\n    document.removeEventListener('click', this.closeDropdown);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* New admin button styling */\r\n.new-admin-button {\r\n  display: block;\r\n  position: relative;\r\n  margin: 50px 0 0 1325px;\r\n  width: 155px;\r\n  height: 50px;\r\n  border-radius: 40px;\r\n  background: var(--Color-Purple, #4d44b5);\r\n  color: #fff;\r\n  font: 400 18px Poppins, sans-serif;\r\n  font-weight: 700;\r\n  border: none;\r\n  cursor: pointer;\r\n  box-shadow: 0 20px 50px 0 rgba(191, 21, 108, 0.05);\r\n}\r\n\r\n/* Styles the user info header */\r\n.user-info-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  color: var(--Color-Text, #303972);\r\n  padding-bottom: 10px;\r\n  border-bottom: 2px solid #ddd;\r\n}\r\n\r\n/*\r\n.user-checkbox-header {\r\nwidth: 20%;\r\n}\r\n*/\r\n\r\n.user-name-header, .user-username-header, .user-email-header {\r\n  flex: 1;\r\n  text-align: left;\r\n}\r\n\r\n.action-header {\r\n  width: 50px;  /* Align with action menu button */\r\n  text-align: right;\r\n}\r\n\r\n/* Styles the user info row */\r\n.user-info-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 10px 0;\r\n  border-bottom: 1px solid #ddd;\r\n  position: relative;\r\n}\r\n\r\n/*\r\n.user-checkbox {\r\nwidth: 20px;\r\nheight: 20px;\r\n}\r\n*/\r\n\r\n.user-name, .user-username, .user-email {\r\n  flex: 1;  /* Align with header */\r\n  font-size: 14px;\r\n  color: var(--Color-Gray-3, #a098ae);\r\n}\r\n\r\n.user-name {\r\n  font-weight: 600;\r\n  color: var(--Color-Text, #303972);\r\n}\r\n\r\n.action-menu {\r\n  width: 50px; /* Align with action header */\r\n  text-align: right;\r\n}\r\n\r\n/* Styles the action dropdown menu */\r\n.action-menu {\r\n  position: relative;\r\n  margin-left: auto;\r\n}\r\n\r\n.action-button {\r\n  background: none;\r\n  border: none;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  vertical-align: 50%;\r\n  padding: 0;\r\n}\r\n\r\n.dropdown-menu {\r\n  position: absolute;\r\n  top: 100%;\r\n  right: 0;\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  list-style: none;\r\n  padding: 5px 0;\r\n  margin: 0;\r\n  z-index: 10;\r\n  width: 120px;\r\n}\r\n\r\n.dropdown-menu li {\r\n  padding: 10px;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  color: #303972;\r\n}\r\n\r\n.dropdown-menu li:hover {\r\n  background: #f5f5f5;\r\n}\r\n\r\n/* Styles the main container that holds the entire admin layout */\r\n.admin-container {\r\n  background: var(--Color-Background, #f3f4ff);\r\n  padding: 0 37px 0 0;\r\n  overflow: hidden;\r\n  flex-grow: 1;\r\n  width: 100%;\r\n}\r\n\r\n/* Flex container that holds the sidebar and main content */\r\n.layout-wrapper {\r\n  display: flex;\r\n  gap: 37px; /* Space between sidebar and content*/\r\n  width: 100%;\r\n  flex-grow: 1;\r\n  padding: 0px 15px 0px 15px;\r\n}\r\n\r\n/* Main content styling */\r\n.main-content {\r\n  width: 100%;\r\n  flex-grow: 1;\r\n  padding: 20px;\r\n}\r\n\r\n/* Header with page title and user details */\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin: 0 13px 0 36px;\r\n  font-family: Poppins, sans-serif;\r\n}\r\n\r\n.page-title {\r\n  color: var(--Color-Text, #303972);\r\n  font: 700 36px Poppins, sans-serif;\r\n  margin: 0;\r\n}\r\n\r\n.user-profile {\r\n  display: flex;\r\n  gap: 18px;\r\n  align-items: center;\r\n}\r\n\r\n.user-info {\r\n  text-align: center;\r\n}\r\n\r\n/* User text styling for name and role */\r\n.user-name {\r\n  color: var(--Color-Text, #303972);\r\n  font: 600 14px Poppins, sans-serif;\r\n  display: block;\r\n}\r\n\r\n.user-role {\r\n  color: var(--Color-Gray-3, #a098ae);\r\n  font: 400 14px Poppins, sans-serif;\r\n  margin-top: 4px;\r\n  display: block;\r\n}\r\n\r\n/* Avatar styling */\r\n.user-avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 40px;\r\n  background: var(--Color-Gray-2, #c1bbeb);\r\n}\r\n\r\n/* Content section styling */\r\n.content-section {\r\n  background: #fff;\r\n  border-radius: 20px;\r\n  margin-top: 20px;\r\n}\r\n\r\n/* Banner styling */\r\n.banner {\r\n  position: relative;\r\n  min-height: 55px;\r\n}\r\n\r\n/* Profile styling */\r\n.profile-content {\r\n  display: flex;\r\n  padding: 0 36px 55px;\r\n  margin-top: -27px;\r\n  position: relative;\r\n  z-index: 1;\r\n}\r\n\r\n.profile-details {\r\n  width: 100%;\r\n  color: var(--Color-Text, #303972);\r\n  font-family: Poppins, sans-serif;\r\n}\r\n\r\n.profile-header-section {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n}\r\n\r\n/* REMOVE ??? */\r\n.profile-title {\r\n  font: 700 32px Poppins, sans-serif;\r\n  margin: 10;     /*T: 10, O: 0*/\r\n  padding-right: 1%; /*T: 1%, O: null*/\r\n}\r\n\r\n/* Styling for about section */\r\n.section-title {\r\n  font: 700 24px Poppins, sans-serif;\r\n  margin: 34px 30px;\r\n}\r\n\r\n.section-content {\r\n  font: 400 18px Poppins, sans-serif;\r\n  text-align: justify;\r\n  margin: 0;\r\n}\r\n\r\n/* Media queries for responsive design go here */\r\n</style>\r\n"],"mappings":";;;AAsEA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,UAAS,QAAS,mBAAmB;AAC9C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,eAAe,EAAE,IAAI;MAAG;MACxBC,cAAc,EAAE,IAAI;MACpBC,WAAW,EAAE;QACXC,SAAS,EAAE,EAAE;QACbC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE;MACT;IACF,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAElB,MAAMC,UAAS,GAAIC,OAAO,CAACC,GAAG,CAACC,mBAAkB,IAAK,2CAA2C;MAGjG,IAAI;QAEF,MAAMC,QAAO,GAAI,MAAMlB,KAAK,CAACmB,GAAG,CAAC,GAAGL,UAAU,SAAS,CAAC,EAAE;QAC1D,IAAI,CAACV,MAAK,GAAIc,QAAQ,CAACf,IAAI,EAAE;MAC/B,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAChD;IACF,CAAC;IACDE,cAAcA,CAACC,MAAM,EAAEC,KAAK,EAAE;MAC5BA,KAAK,CAACC,eAAe,CAAC,CAAC;MACvB,IAAI,CAACpB,eAAc,GAAI,IAAI,CAACA,eAAc,KAAMkB,MAAK,GAAI,IAAG,GAAIA,MAAM,EAAE;IAC1E,CAAC;IACDG,QAAQA,CAACH,MAAM,EAAE;MAAG;MACpB,IAAI,CAACjB,cAAa,GAAIiB,MAAM,CAACI,EAAE;MAC7B,IAAI,CAACpB,WAAU,GAAI;QAAE,GAAGqB;MAAM,CAAC,EAAE;MACjC,IAAI,CAACvB,eAAc,GAAI,IAAI,EAAE;IAC/B,CAAC;IAED,MAAMwB,QAAQA,CAACN,MAAM,EAAE;MACrB,MAAMT,UAAS,GAAIC,OAAO,CAACC,GAAG,CAACC,mBAAkB,IAAK,2CAA2C;MACjG,IAAI;QACF,MAAMjB,KAAK,CAAC8B,GAAG,CAAC,GAAGhB,UAAU,SAAS,EAAE;UACtCa,EAAE,EAAEJ,MAAM;UACVf,SAAS,EAAE,IAAI,CAACD,WAAW,CAACC,SAAS;UACrCC,QAAQ,EAAE,IAAI,CAACF,WAAW,CAACE,QAAQ;UACnCC,QAAQ,EAAE,IAAI,CAACH,WAAW,CAACG,QAAQ;UACnCC,KAAK,EAAE,IAAI,CAACJ,WAAW,CAACI;QAC1B,CAAC,CAAC;QACF;QACA,IAAI,CAACP,MAAK,GAAI,IAAI,CAACA,MAAM,CAAC2B,GAAG,CAACH,KAAI,IAAKA,KAAK,CAACD,EAAC,KAAMJ,MAAK,GAAI;UAAE,GAAGK,KAAK;UAAE,GAAG,IAAI,CAACrB;QAAY,IAAIqB,KAAM,CAAC;QAExG,IAAI,CAACtB,cAAa,GAAI,IAAI,EAAE;MAC9B,EAAE,OAAOc,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CY,KAAK,CAAC,yBAAyB,CAAC;MAClC;IACF,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,IAAI,CAAC3B,cAAa,GAAI,IAAI,EAAE;IAC9B,CAAC;IAED,MAAM4B,UAAUA,CAACX,MAAM,EAAE;MAAG;MAC1B,IAAI,CAACY,OAAO,CAAC,6CAA6C,CAAC,EAAE;MAE7D,IAAI;QACF,MAAMrB,UAAS,GAAIC,OAAO,CAACC,GAAG,CAACC,mBAAkB,IAAK,2CAA2C;QAEjG,MAAMjB,KAAK,CAACoC,MAAM,CAAC,GAAGtB,UAAU,SAAS,EAAC;UAAEX,IAAI,EAAE;YAAEwB,EAAE,EAAEJ;UAAO;QAAC,CAAC,CAAC;;QAElE;QACA,IAAI,CAACnB,MAAK,GAAI,IAAI,CAACA,MAAM,CAACiC,MAAM,CAACT,KAAI,IAAKA,KAAK,CAACD,EAAC,KAAMJ,MAAM,CAAC;QAG9DS,KAAK,CAAC,6BAA6B,CAAC;MACtC,EAAE,OAAOZ,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CY,KAAK,CAAC,yBAAyB,CAAC;MAClC;IACF,CAAC;IACDM,aAAaA,CAAA,EAAG;MACd,IAAI,CAACjC,eAAc,GAAI,IAAI,EAAE;IAC/B;EACF,CAAC;EACDkC,OAAOA,CAAA,EAAG;IACR;IACAC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACH,aAAa,CAAC;IACtD,IAAI,CAACzB,WAAW,CAAC,CAAC;EACpB,CAAC;EACD6B,aAAaA,CAAA,EAAG;IACd;IACAF,QAAQ,CAACG,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAACL,aAAa,CAAC;EAC3D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}